(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7772],{89844:function(e){function t(e){return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=89844,e.exports=t},46601:function(){},35836:function(e,t,n){Promise.resolve().then(n.bind(n,45480))},45480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var s=n(57437);n(21248);var i=n(2265),r=e=>{let{isOpen:t,onClose:n,title:i,children:r}=e;return t?(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal",children:[i&&(0,s.jsx)("h4",{className:"modal-title",children:i}),(0,s.jsx)("div",{className:"modal-content",children:r}),(0,s.jsx)("button",{className:"modal-close",onClick:n,children:"Close"})]})}):null},l=JSON.parse('{"Fo":[{"address":"0x0000000000000000000000000000000000000000","name":"APT","icon":"/eth.svg","decimals":18}]}'),a=()=>{let[e,t]=(0,i.useState)(!1),[n,a]=(0,i.useState)(null),[u,d]=(0,i.useState)(""),[m,h]=(0,i.useState)(""),g=()=>t(e=>!e),p=()=>{if(!o(u)||!c(m))return};return(0,s.jsxs)("div",{className:"deposit-container",children:[(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()},children:[(0,s.jsx)("h5",{children:"Send"}),(0,s.jsx)("input",{className:"input-field","aria-label":"Recipient",onChange:e=>d(e.target.value),placeholder:"example@gmail.com",value:u,type:"email"}),(0,s.jsx)("input",{className:"input-field","aria-label":"Amount",onChange:e=>h(e.target.value.toString()),placeholder:"Amount",value:m,type:"number",min:"0",step:1e-18}),(0,s.jsx)("button",{type:"submit",disabled:!u||!m||!o(u)||!c(m)||!n,children:"Send"}),(0,s.jsx)("button",{className:"select-token-btn",onClick:g,children:(0,s.jsxs)("span",{className:"arrow-down",children:[(0,s.jsx)("img",{src:null==n?void 0:n.icon,alt:null==n?void 0:n.name}),n?n.name:"Select Token"]})})]}),(0,s.jsx)(r,{isOpen:e,onClose:g,title:"Select Token",children:l.Fo.map(e=>(0,s.jsx)("div",{children:(0,s.jsxs)("button",{onClick:()=>{a(e),g()},children:[(0,s.jsx)("img",{src:e.icon,alt:e.name}),e.name]})},e.address))})]})};let o=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),c=e=>{let t=Number(e);return!isNaN(t)&&t>0};n(83343);let u=()=>{document.cookie.split(";").map(e=>{let t=e.indexOf("="),n=t>-1?e.substr(0,t):e.trim();document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"})},d=()=>"viem@1.21.3";class m extends Error{constructor(e,t={}){super(),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ViemError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:d()});let n=t.cause instanceof m?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof m&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: https://viem.sh${s}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join("\n"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return function e(t,n){return n?.(t)?t:t&&"object"==typeof t&&"cause"in t?e(t.cause,n):n?null:t}(this,e)}}class h extends m{constructor({max:e,min:t,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${8*s}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"IntegerOutOfRangeError"})}}class g extends m{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeOverflowError"})}}class p extends m{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SizeExceedsPaddingSizeError"})}}function f(e,{dir:t,size:n=32}={}){return"string"==typeof e?function(e,{dir:t,size:n=32}={}){if(null===n)return e;let s=e.replace("0x","");if(s.length>2*n)throw new p({size:Math.ceil(s.length/2),targetSize:n,type:"hex"});return`0x${s["right"===t?"padEnd":"padStart"](2*n,"0")}`}(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new p({size:e.length,targetSize:n,type:"bytes"});let s=new Uint8Array(n);for(let i=0;i<n;i++){let r="right"===t;s[r?i:n-i-1]=e[r?i:e.length-i-1]}return s}(e,{dir:t,size:n})}function b(e){return!function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?e.length:Math.ceil((e.length-2)/2)}function x(e,{size:t}){if(b(e)>t)throw new g({givenSize:b(e),maxSize:t})}let j=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function v(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=j[e[t]];let s=`0x${n}`;return"number"==typeof t.size?(x(s,{size:t.size}),f(s,{dir:"right",size:t.size})):s}let y=new TextEncoder,w=e=>{let{identity:t,token:n,disabled:r,hideClaim:l}=e;return(0,i.useEffect)(()=>{let e=setInterval(()=>{},5e3);return()=>clearInterval(e)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{children:"Availiable Balance:"})}),(0,s.jsx)("div",{className:"balance",children:(0,s.jsx)("img",{src:n.icon,alt:n.name})}),(0,s.jsx)("button",{disabled:r,hidden:null!=l&&l,children:"Claim ".concat(n.name)})]})};var N=n(89802),S=e=>{let{email:t,disabled:n,hideClaim:i}=e,r=function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t={}){let n;let{signed:s,size:i}=t,r=BigInt(e);i?n=s?(1n<<8n*BigInt(i)-1n)-1n:2n**(8n*BigInt(i))-1n:"number"==typeof e&&(n=BigInt(Number.MAX_SAFE_INTEGER));let l="bigint"==typeof n&&s?-n-1n:0;if(n&&r>n||r<l){let t="bigint"==typeof e?"n":"";throw new h({max:n?`${n}${t}`:void 0,min:`${l}${t}`,signed:s,size:i,value:`${e}${t}`})}let a=`0x${(s&&r<0?(1n<<BigInt(8*i))+BigInt(r):r).toString(16)}`;return i?f(a,{size:i}):a}(e,t):"string"==typeof e?function(e,t={}){let n=y.encode(e);return v(n,t)}(e,t):"boolean"==typeof e?function(e,t={}){let n=`0x${Number(e)}`;return"number"==typeof t.size?(x(n,{size:t.size}),f(n,{size:t.size})):n}(e,t):v(e,t)}((0,N.J)(null!=t?t:""));return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"balance-container",children:(0,s.jsx)(w,{identity:null!=r?r:"0x0000000000000000000000000000000000000000",token:l.Fo[0],disabled:n,hideClaim:i})})})},$=e=>{let{disabled:t,email:n}=e,[r,l]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{},[]);let d=(0,i.useCallback)(async()=>{l(!0);let e=document.cookie.split("; ").find(e=>e.startsWith("jwt=")),t=null==e?void 0:e.split("=")[1];if(!t){console.error("JWT not found"),l(!1);return}},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S,{email:n,disabled:t,hideClaim:!0}),(0,s.jsx)("button",{onClick:d,disabled:r||t||a||!c,children:a?"Claimed":r?"Proving...":"Prove with Bonsai™"}),r?(0,s.jsx)("p",{children:"This will take a few moments..."}):(0,s.jsx)("p",{})]})},E=n(25566);let k=e=>{let{}=e,t=E.env.NEXT_GOOGLE_CLIENT_ID;(0,i.useEffect)(()=>{var e;let s=()=>{var e;if(null===(e=window.google)||void 0===e?void 0:e.accounts){let e=document.getElementById("googleSignInButton");e&&(e.innerHTML=""),window.google.accounts.id.initialize({client_id:t,callback:n,scope:"email",auto_select:!1,state:"hello"}),window.google.accounts.id.renderButton(document.getElementById("googleSignInButton"),{theme:"outline",size:"large"})}};return(null===(e=window.google)||void 0===e?void 0:e.accounts)?s():(()=>{let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{s()},document.body.appendChild(e)})(),()=>{let e=document.querySelector('script[src="https://accounts.google.com/gsi/client"]');e&&e.remove(),s()}},[t]);let n=async e=>{let{credential:t}=e;document.cookie="jwt=".concat(t,"; path=/; samesite=Strict")};return(0,s.jsx)("div",{className:"sign-in-container",children:(0,s.jsx)("button",{className:"gsi-btn",id:"googleSignInButton",onClick:()=>{}})})};var C=()=>{let[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(null),[l,a]=(0,i.useState)(1);return(0,i.useEffect)(()=>{let e=setInterval(()=>{let e=document.cookie.split("; ").find(e=>e.startsWith("jwt=")),n=e&&e.split("=")[1],s=!1;if(n&&""!==n){s=!0;let e=JSON.parse(atob(n.split(".")[1]));r(e.email)}else r(null);t(s)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"claim-container",children:[(0,s.jsx)("div",{className:"step-indicator",children:["Connect Wallet","Sign In","Prove & Claim"].map((e,t)=>(0,s.jsxs)("div",{className:"step ".concat(t+1===l?"current":""),children:[t+1,": ",e]},t))}),(0,s.jsx)("div",{className:"step-content",children:(()=>{switch(l){case 2:return(0,s.jsx)("p",{children:"Please connect your wallet to proceed."});case 1:return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{children:" Sign in to your account"}),(0,s.jsx)(k,{})]});case 3:return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{children:"Prove account ownership"}),n&&(0,s.jsx)("h5",{children:"Welcome, ".concat(n)}),(0,s.jsx)($,{disabled:!1,email:n}),(0,s.jsxs)("h6",{children:["Proving ownership will automatically",(0,s.jsx)("br",{}),"deposit the balance to your wallet."]})]});default:return(0,s.jsx)("p",{children:"Unknown step"})}})()})]})},z=n(21380),P=n(29617);function O(){let[e,t]=(0,i.useState)("claim"),n=e=>{t(e.target.value)};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"radio-container",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{className:"radio-input",type:"radio",value:"deposit",checked:"deposit"===e,onChange:n}),"Send"]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{className:"radio-input",type:"radio",value:"claim",checked:"claim"===e,onChange:n}),"Claim"]})]}),(0,s.jsx)("div",{className:"card",children:"deposit"===e?(0,s.jsx)(a,{}):(0,s.jsx)(C,{})})]})}var I=function(){return(0,i.useEffect)(()=>{u()}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.Z,{}),(0,s.jsxs)("div",{className:"app-container",children:[(0,s.jsx)("h2",{className:"title",children:"Bonsai Pay Demo"}),(0,s.jsx)("p",{className:"subtitle",children:"powered by Bonsai™"}),(0,s.jsx)(z.RZ8,{}),(0,s.jsx)(O,{}),(0,s.jsx)("h6",{children:"Only Google accounts are supported."}),(0,s.jsx)("p",{className:"read-the-docs",children:"This is for demo purposes only."}),(0,s.jsxs)("p",{className:"read-the-docs",children:["Please read our"," ",(0,s.jsx)("a",{href:"https://github.com/risc0/demos/blob/main/bonsai-pay/README.md",target:"_blank",rel:"noreferrer",children:"docs"})," ","for more information."]})]})]})}},83343:function(){},21248:function(){}},function(e){e.O(0,[1669,8310,2372,9578,9023,9719,1630,478,9776,1720,1037,2971,2472,1744],function(){return e(e.s=35836)}),_N_E=e.O()}]);