(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1037],{55024:function(){},29617:function(e,t,r){"use strict";var a=r(57437),n=r(2265),o=r(11490);r(61396);var i=r(74983),s=r(97350),c=r(81630),l=r.n(c);t.Z=()=>{let e=o.Z.get("dream_starter_wallet"),{aptos:t,moduleAddress:r}=(0,s.Z)(),{activeAccount:c}=(0,i.x)();console.log("activeAccount",c);let[d,p]=(0,n.useState)(""),[u,h]=(0,n.useState)(!1),[m,f]=(0,n.useState)(null),[w,x]=(0,n.useState)(!1),[v,y]=(0,n.useState)(!1),g=()=>{if("aptos"in window)return window.aptos;window.open("https://petra.app/","_blank")},b=async()=>{let e=g();try{let t=await e.connect();console.log(t);let r=await e.network();if("Testnet"===r){let r={message:"Hello! from dream starter",nonce:Math.random().toString(16)};await e.signMessage(r),o.Z.set("dream_starter_wallet",t.address,{expires:7}),window.location.reload()}else alert("Switch to Testnet in your Petra wallet")}catch(e){console.error(e)}};return(0,n.useEffect)(()=>{let e=async()=>{try{let e=await l().get("https://api.multiavatar.com/".concat(Math.floor(1e3*Math.random()))),t="data:image/svg+xml,".concat(encodeURIComponent(e.data));p(t)}catch(e){console.error("Error fetching avatar:",e.message)}};e()},[]),(0,n.useEffect)(()=>{let e=async()=>{try{let e=await t.getAccountAPTAmount(c.accountAddress);console.log("Sender balance:",e),f(e),x(!1)}catch(e){console.error("Error fetching balance:",e.message)}};c&&e()},[c,t,w]),(0,a.jsxs)("nav",{className:"bg-blue-900 px-4 py-2 md:px-6 md:py-4 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:"/nav.png",alt:"",className:"w-8 h-8 mr-2"}),(0,a.jsx)("div",{className:"text-white text-lg font-semibold",children:(0,a.jsx)("a",{href:"/",children:"Dreamstarter"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"hidden md:flex gap-4 text-white",children:[(0,a.jsx)("a",{href:"/dashboard/crowdfunding-events",children:"Crowdfunding Events"}),(0,a.jsx)("a",{href:"/dashboard/started-events",children:"Started Events"}),(0,a.jsx)("a",{href:"/dashboard/yourpoaps",children:"Your Poaps"})]}),(0,a.jsx)("button",{className:"md:hidden text-white focus:outline-none",onClick:()=>{y(!v)},children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:v?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]})]}),v&&(0,a.jsxs)("div",{className:"flex flex-col items-center mt-4 md:hidden",children:[(0,a.jsx)("a",{href:"/dashboard/crowdfunding-events",className:"text-white hover:text-blue-500 mb-2",children:"Crowdfunding Events"}),(0,a.jsx)("a",{href:"/dashboard/started-events",className:"text-white hover:text-blue-500 mb-2",children:"Started Events"}),(0,a.jsx)("a",{href:"/dashboard/yourpoaps",className:"text-white hover:text-blue-500 mb-2",children:"Your Poaps"}),!e&&!c&&(0,a.jsx)("button",{className:"bg-white text-black py-2 px-4 mt-4 rounded-lg",onClick:()=>h(!0),children:"Login Now"})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 max-w-sm mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-800 focus:outline-none",onClick:()=>h(!1),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("p",{className:"text-xl font-semibold mb-4",children:"Login Options"}),(0,a.jsx)("button",{className:"w-full py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",onClick:b,children:"Connect with Petra"})]})]})})]})}},97350:function(e,t,r){"use strict";var a=r(2265),n=r(51577);t.Z=function(){let e=(0,a.useMemo)(()=>{let e=new n.ScN({network:n.ZcK.TESTNET});return new n.gZG(e)},[]);return{aptos:e,moduleAddress:"0xcfcdcdf5798fd485e834f4cdf657685a68746bad02f439880f6707b0ccc57220"}}},74983:function(e,t,r){"use strict";r.d(t,{x:function(){return K}});var a=r(51577),n=r(94660),o=r(74810);let i=new a.gZG(new a.ScN({network:a.ZcK.TESTNET}));var s=r(53771),c=r(74578);let l=c.z.object({aud:c.z.string(),exp:c.z.number(),iat:c.z.number(),iss:c.z.string(),sub:c.z.string()}),d=l.extend({nonce:c.z.string()}),p=d.extend({family_name:c.z.string().optional(),given_name:c.z.string().optional(),locale:c.z.string().optional(),name:c.z.string(),picture:c.z.string().optional()}),u=d.extend({email:c.z.string().optional(),email_verified:c.z.boolean()}),h=p.merge(u),m=e=>h.parse((0,s.o)(e)),f=e=>"string"==typeof e?f(m(e)):!!e.nonce,w=e=>"string"==typeof e?w(m(e)):f(e)?e:null,x={decode:e=>new a.Cwi({blinder:e.blinder,expiryDateSecs:BigInt(e.expiryDateSecs),privateKey:new a.qN7(e.privateKey)}),encode:e=>({__type:"EphemeralKeyPair",blinder:e.blinder,expiryDateSecs:e.expiryDateSecs.toString(),privateKey:e.privateKey.toString()})},v=e=>g(e)?e:void 0;BigInt(86400);let y=()=>BigInt(Math.floor(Date.now()/1e3)),g=e=>y()<=e.expiryDateSecs,b={decode:e=>a.Ifl.fromJWTAndProof({ephemeralKeyPair:e.ephemeralKeyPair,jwt:e.jwt,pepper:e.pepper,proof:new a.fah({extraField:e.proof.extraField,overrideAudVal:e.proof.overrideAudVal,proof:new a.rT3({a:e.proof.proof.a,b:e.proof.proof.b,c:e.proof.proof.c})})}),encode:e=>({__type:"KeylessAccount",ephemeralKeyPair:e.ephemeralKeyPair,jwt:e.jwt,pepper:e.pepper,proof:{extraField:e.proof.extraField,overrideAudVal:e.proof.overrideAudVal,proof:{a:e.proof.proof.a,b:e.proof.proof.b,c:e.proof.proof.c}}})},j=e=>g(e.ephemeralKeyPair)&&f(e.jwt)&&m(e.jwt).nonce===e.ephemeralKeyPair.nonce?e:void 0,k=(0,o.FL)(()=>localStorage,{replacer:(e,t)=>"bigint"==typeof t?{__type:"bigint",value:t.toString()}:t instanceof Uint8Array?{__type:"Uint8Array",value:Array.from(t)}:t instanceof a.Cwi?x.encode(t):t instanceof a.Ifl?b.encode(t):t,reviver:(e,t)=>t&&"bigint"===t.__type?BigInt(t.value):t&&"Uint8Array"===t.__type?new Uint8Array(t.value):t&&"EphemeralKeyPair"===t.__type?x.decode(t):t&&"KeylessAccount"===t.__type?b.decode(t):t}),K=(0,n.Ue)()((0,o.tJ)((e,t)=>({accounts:[],commitEphemeralKeyPair:t=>{let r=g(t);if(!r)throw Error("addEphemeralKeyPair: Invalid ephemeral key pair provided");e({ephemeralKeyPair:t})},disconnectKeylessAccount:()=>e({activeAccount:void 0}),getEphemeralKeyPair:()=>{let e=t().ephemeralKeyPair;return e?v(e):void 0},switchKeylessAccount:async r=>{let a;e({...t(),activeAccount:void 0},!0);let n=w(r);if(!n)throw Error("switchKeylessAccount: Invalid idToken provided, could not decode");let o=t().getEphemeralKeyPair();if(!o||(null==o?void 0:o.nonce)!==n.nonce)throw Error("switchKeylessAccount: Ephemeral key pair not found");let s=t().accounts.find(e=>e.idToken.decoded.sub===n.sub);try{a=await i.deriveKeylessAccount({ephemeralKeyPair:o,jwt:r})}catch(e){if(!(null==s?void 0:s.pepper))throw e;a=await i.deriveKeylessAccount({ephemeralKeyPair:o,jwt:r,pepper:s.pepper})}let{pepper:c}=a;return e({accounts:s?t().accounts.map(e=>e.idToken.decoded.sub===n.sub?{idToken:{decoded:n,raw:r},pepper:c}:e):[...t().accounts,{idToken:{decoded:n,raw:r},pepper:c}],activeAccount:a}),a}}),{merge:(e,t)=>{let r={...t,...e};return{...r,activeAccount:r.activeAccount&&j(r.activeAccount),ephemeralKeyPair:r.ephemeralKeyPair&&v(r.ephemeralKeyPair)}},name:"@aptos-connect/keyless-accounts",partialize:e=>{let{activeAccount:t,ephemeralKeyPair:r,...a}=e;return{...a,activeAccount:t&&j(t),ephemeralKeyPair:r&&v(r)}},storage:k,version:1}))}}]);